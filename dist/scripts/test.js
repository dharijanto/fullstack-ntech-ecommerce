"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const util=require("util"),Sequelize=require("sequelize"),app_config_1=require("../app-config"),sequelizeSync=require("../db-structure"),sequelize_service_1=require("../services/sequelize-service"),local_shop_service_1=require("../app/local-shop-services/local-shop-service"),optionalPassword=app_config_1.default.DB.PASSWORD?`:${app_config_1.default.DB.PASSWORD}`:"",sequelize=new Sequelize(app_config_1.default.DB.DB_NAME,app_config_1.default.DB.USERNAME,app_config_1.default.DB.PASSWORD,{dialect:"mysql",port:app_config_1.default.DB.PORT,logging:!0}),models=sequelizeSync(sequelize,{});function main(){local_shop_service_1.default.getInStockProducts({}).then(e=>{e.status&&e.data?console.log(util.inspect(e,!1,null,!0)):console.log("unexpected!")})}sequelize.sync().then(()=>{sequelize_service_1.default.initialize(sequelize,models),local_shop_service_1.default.initialize().then(()=>{main()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL3Rlc3QudHMiXSwibmFtZXMiOlsidXRpbCIsInJlcXVpcmUiLCJTZXF1ZWxpemUiLCJhcHBfY29uZmlnXzEiLCJzZXF1ZWxpemVTeW5jIiwic2VxdWVsaXplX3NlcnZpY2VfMSIsImxvY2FsX3Nob3Bfc2VydmljZV8xIiwib3B0aW9uYWxQYXNzd29yZCIsImRlZmF1bHQiLCJEQiIsIlBBU1NXT1JEIiwic2VxdWVsaXplIiwiREJfTkFNRSIsIlVTRVJOQU1FIiwiZGlhbGVjdCIsInBvcnQiLCJQT1JUIiwibG9nZ2luZyIsIm1vZGVscyIsIm1haW4iLCJnZXRJblN0b2NrUHJvZHVjdHMiLCJ0aGVuIiwicmVzcCIsInN0YXR1cyIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiaW5zcGVjdCIsInN5bmMiLCJpbml0aWFsaXplIl0sIm1hcHBpbmdzIjoib0VBQUEsTUFBQUEsS0FBQUMsUUFBQSxRQUVBQyxVQUFBRCxRQUFBLGFBQ0FFLGFBQUFGLFFBQUEsaUJBQ01HLGNBQWdCSCxRQUFRLG1CQUM5Qkksb0JBQUFKLFFBQUEsaUNBQ0FLLHFCQUFBTCxRQUFBLGlEQUVNTSxpQkFBbUJKLGFBQUFLLFFBQVVDLEdBQUdDLGFBQWVQLGFBQUFLLFFBQVVDLEdBQUdDLFdBQWEsR0FDekVDLFVBQVksSUFBSVQsVUFBVUMsYUFBQUssUUFBVUMsR0FBR0csUUFBU1QsYUFBQUssUUFBVUMsR0FBR0ksU0FBVVYsYUFBQUssUUFBVUMsR0FBR0MsVUFFdEZJLFFBQVMsUUFDVEMsS0FBTVosYUFBQUssUUFBVUMsR0FBR08sS0FDbkJDLFNBQVMsSUFHUEMsT0FBU2QsY0FBY08sY0FRN0IsU0FBQVEsT0FhRWIscUJBQUFFLFFBQWlCWSx1QkFBdUJDLEtBQUtDLElBQ3ZDQSxFQUFLQyxRQUFVRCxFQUFLRSxLQUN0QkMsUUFBUUMsSUFBSTFCLEtBQUsyQixRQUFRTCxHQUFNLEVBQU8sTUFBTSxJQUs1Q0csUUFBUUMsSUFBSSxpQkEzQmxCZixVQUFVaUIsT0FBT1AsS0FBSyxLQUNwQmhCLG9CQUFBRyxRQUFpQnFCLFdBQVdsQixVQUFXTyxRQUN2Q1oscUJBQUFFLFFBQWlCcUIsYUFBYVIsS0FBSyxLQUNqQ0YiLCJmaWxlIjoic2NyaXB0cy90ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXRpbCBmcm9tICd1dGlsJ1xuXG5pbXBvcnQgKiBhcyBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJ1xuaW1wb3J0IEFwcENvbmZpZyBmcm9tICcuLi9hcHAtY29uZmlnJ1xuY29uc3Qgc2VxdWVsaXplU3luYyA9IHJlcXVpcmUoJy4uL2RiLXN0cnVjdHVyZScpXG5pbXBvcnQgU2VxdWVsaXplU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9zZXF1ZWxpemUtc2VydmljZSdcbmltcG9ydCBMb2NhbFNob3BTZXJ2aWNlIGZyb20gJy4uL2FwcC9sb2NhbC1zaG9wLXNlcnZpY2VzL2xvY2FsLXNob3Atc2VydmljZSdcblxuY29uc3Qgb3B0aW9uYWxQYXNzd29yZCA9IEFwcENvbmZpZy5EQi5QQVNTV09SRCA/IGA6JHtBcHBDb25maWcuREIuUEFTU1dPUkR9YCA6ICcnXG5jb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKEFwcENvbmZpZy5EQi5EQl9OQU1FLCBBcHBDb25maWcuREIuVVNFUk5BTUUsIEFwcENvbmZpZy5EQi5QQVNTV09SRCxcbiAge1xuICAgIGRpYWxlY3Q6ICdteXNxbCcsXG4gICAgcG9ydDogQXBwQ29uZmlnLkRCLlBPUlQsXG4gICAgbG9nZ2luZzogdHJ1ZVxuICB9KVxuXG5jb25zdCBtb2RlbHMgPSBzZXF1ZWxpemVTeW5jKHNlcXVlbGl6ZSwge30pXG5zZXF1ZWxpemUuc3luYygpLnRoZW4oKCkgPT4ge1xuICBTZXF1ZWxpemVTZXJ2aWNlLmluaXRpYWxpemUoc2VxdWVsaXplLCBtb2RlbHMpXG4gIExvY2FsU2hvcFNlcnZpY2UuaW5pdGlhbGl6ZSgpLnRoZW4oKCkgPT4ge1xuICAgIG1haW4oKVxuICB9KVxufSlcblxuZnVuY3Rpb24gbWFpbiAoKSB7XG4gIC8qIGNvbnN0IHByb21pc2VzID0gW0xvY2FsU2hvcFNlcnZpY2UuZ2V0SW5TdG9ja1Byb2R1Y3RzLCBMb2NhbFNob3BTZXJ2aWNlLmdldEluU3RvY2tQcm9kdWN0XVxuICBjb25zdCBhcmcgPSBbW10sIFs1XV1cblxuICBwcm9taXNlcy5yZWR1Y2UoKGFjYywgcHJvbWlzZSwgaW5kZXgpID0+IHtcbiAgICByZXR1cm4gYWNjLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHByb21pc2UoYXJnW2luZGV4XSlcbiAgICB9KVxuICB9LCBQcm9taXNlLnJlc29sdmUoKSlcbiAqL1xuICAvKiBMb2NhbFNob3BTZXJ2aWNlLmdldEluU3RvY2tQcm9kdWN0KDUpLnRoZW4ocmVzcCA9PiB7XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzcCkpXG4gIH0pICovXG4gIExvY2FsU2hvcFNlcnZpY2UuZ2V0SW5TdG9ja1Byb2R1Y3RzKHt9KS50aGVuKHJlc3AgPT4ge1xuICAgIGlmIChyZXNwLnN0YXR1cyAmJiByZXNwLmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKHV0aWwuaW5zcGVjdChyZXNwLCBmYWxzZSwgbnVsbCwgdHJ1ZSkpXG4gICAgICAvKiByZXNwLmRhdGEuZm9yRWFjaChwcm9kdWN0ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZHVjdC5uYW1lKVxuICAgICAgfSkgKi9cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3VuZXhwZWN0ZWQhJylcbiAgICB9XG4gIH0pXG59XG4iXX0=
