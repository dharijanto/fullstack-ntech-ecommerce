"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Sequelize=require("sequelize"),app_config_1=require("../app-config"),search_service_1=require("../services/search-service"),sequelize_service_1=require("../services/sequelize-service"),local_shop_service_1=require("../app/local-shop-services/local-shop-service"),sequelizeSync=require("../db-structure"),sequelize=new Sequelize(app_config_1.default.DB.DB_NAME,app_config_1.default.DB.USERNAME,app_config_1.default.DB.PASSWORD,{dialect:"mysql",port:app_config_1.default.DB.PORT,logging:!0}),models=sequelizeSync(sequelize,{});sequelize.sync().then(()=>(sequelize_service_1.default.initialize(sequelize,models),local_shop_service_1.default.initialize().then(()=>search_service_1.default.initialize().then(()=>{console.log("Search service initialized!"),search_service_1.default.searchPOProducts("iPhone").then(e=>{console.log("Search for poProducts: "+JSON.stringify(e,null,2))}).catch(e=>{console.error("Search error: "+e)})})))).catch(e=>{console.error("Search service failed to initialize: "+e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL3NlYXJjaC10ZXN0LnRzIl0sIm5hbWVzIjpbIlNlcXVlbGl6ZSIsInJlcXVpcmUiLCJhcHBfY29uZmlnXzEiLCJzZWFyY2hfc2VydmljZV8xIiwic2VxdWVsaXplX3NlcnZpY2VfMSIsImxvY2FsX3Nob3Bfc2VydmljZV8xIiwic2VxdWVsaXplU3luYyIsInNlcXVlbGl6ZSIsImRlZmF1bHQiLCJEQiIsIkRCX05BTUUiLCJVU0VSTkFNRSIsIlBBU1NXT1JEIiwiZGlhbGVjdCIsInBvcnQiLCJQT1JUIiwibG9nZ2luZyIsIm1vZGVscyIsInN5bmMiLCJ0aGVuIiwiaW5pdGlhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJzZWFyY2hQT1Byb2R1Y3RzIiwicmVzdWx0IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhdGNoIiwiZXJyIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJvRUFBQSxNQUFBQSxVQUFBQyxRQUFBLGFBRUFDLGFBQUFELFFBQUEsaUJBQ0FFLGlCQUFBRixRQUFBLDhCQUNBRyxvQkFBQUgsUUFBQSxpQ0FDQUkscUJBQUFKLFFBQUEsaURBQ01LLGNBQWdCTCxRQUFRLG1CQUV4Qk0sVUFBWSxJQUFJUCxVQUFVRSxhQUFBTSxRQUFVQyxHQUFHQyxRQUFTUixhQUFBTSxRQUFVQyxHQUFHRSxTQUFVVCxhQUFBTSxRQUFVQyxHQUFHRyxVQUV0RkMsUUFBUyxRQUNUQyxLQUFNWixhQUFBTSxRQUFVQyxHQUFHTSxLQUNuQkMsU0FBUyxJQUdQQyxPQUFTWCxjQUFjQyxjQUM3QkEsVUFBVVcsT0FBT0MsS0FBSyxLQUNwQmYsb0JBQUFJLFFBQWlCWSxXQUFXYixVQUFXVSxRQUNoQ1oscUJBQUFHLFFBQWlCWSxhQUFhRCxLQUFLLElBQ2pDaEIsaUJBQUFLLFFBQWNZLGFBQWFELEtBQUssS0FDckNFLFFBQVFDLElBQUksK0JBT1puQixpQkFBQUssUUFBY2UsaUJBQWlCLFVBQVVKLEtBQUtLLElBQzVDSCxRQUFRQyxJQUFJLDBCQUE0QkcsS0FBS0MsVUFBVUYsRUFBUSxLQUFNLE1BQ3BFRyxNQUFNQyxJQUNQUCxRQUFRUSxNQUFNLGlCQUFtQkQsVUFVdENELE1BQU1DLElBQ1BQLFFBQVFRLE1BQU0sd0NBQTBDRCIsImZpbGUiOiJzY3JpcHRzL3NlYXJjaC10ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgU2VxdWVsaXplIGZyb20gJ3NlcXVlbGl6ZSdcblxuaW1wb3J0IEFwcENvbmZpZyBmcm9tICcuLi9hcHAtY29uZmlnJ1xuaW1wb3J0IFNlYXJjaFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvc2VhcmNoLXNlcnZpY2UnXG5pbXBvcnQgU2VxdWVsaXplU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9zZXF1ZWxpemUtc2VydmljZSdcbmltcG9ydCBMb2NhbFNob3BTZXJ2aWNlIGZyb20gJy4uL2FwcC9sb2NhbC1zaG9wLXNlcnZpY2VzL2xvY2FsLXNob3Atc2VydmljZSdcbmNvbnN0IHNlcXVlbGl6ZVN5bmMgPSByZXF1aXJlKCcuLi9kYi1zdHJ1Y3R1cmUnKVxuXG5jb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKEFwcENvbmZpZy5EQi5EQl9OQU1FLCBBcHBDb25maWcuREIuVVNFUk5BTUUsIEFwcENvbmZpZy5EQi5QQVNTV09SRCxcbiAge1xuICAgIGRpYWxlY3Q6ICdteXNxbCcsXG4gICAgcG9ydDogQXBwQ29uZmlnLkRCLlBPUlQsXG4gICAgbG9nZ2luZzogdHJ1ZVxuICB9KVxuXG5jb25zdCBtb2RlbHMgPSBzZXF1ZWxpemVTeW5jKHNlcXVlbGl6ZSwge30pXG5zZXF1ZWxpemUuc3luYygpLnRoZW4oKCkgPT4ge1xuICBTZXF1ZWxpemVTZXJ2aWNlLmluaXRpYWxpemUoc2VxdWVsaXplLCBtb2RlbHMpXG4gIHJldHVybiBMb2NhbFNob3BTZXJ2aWNlLmluaXRpYWxpemUoKS50aGVuKCgpID0+IHtcbiAgICByZXR1cm4gU2VhcmNoU2VydmljZS5pbml0aWFsaXplKCkudGhlbigoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnU2VhcmNoIHNlcnZpY2UgaW5pdGlhbGl6ZWQhJylcbiAgICAgIC8qIFNlYXJjaFNlcnZpY2Uuc2VhcmNoSW5TdG9ja1Byb2R1Y3RzKCdGbGFzaCBEcml2ZScpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NlYXJjaCBmb3IgaW5TdG9ja1Byb2R1Y3RzOiBcXG4nICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSlcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcjogJyArIGVycilcbiAgICAgIH0pICovXG5cbiAgICAgIFNlYXJjaFNlcnZpY2Uuc2VhcmNoUE9Qcm9kdWN0cygnaVBob25lJykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnU2VhcmNoIGZvciBwb1Byb2R1Y3RzOiAnICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSlcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcjogJyArIGVycilcbiAgICAgIH0pXG5cbiAgICAgIC8qIFNlYXJjaFNlcnZpY2Uuc2VhcmNoU3ViQ2F0ZWdvcmllcygnQ29tcHV0ZXInKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZWFyY2ggZm9yIHN1YkNhdGVnb3JpZXM6ICcgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKVxuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VhcmNoIGVycm9yOiAnICsgZXJyKVxuICAgICAgfSkgKi9cbiAgICB9KVxuICB9KVxufSkuY2F0Y2goZXJyID0+IHtcbiAgY29uc29sZS5lcnJvcignU2VhcmNoIHNlcnZpY2UgZmFpbGVkIHRvIGluaXRpYWxpemU6ICcgKyBlcnIpXG59KVxuIl19
