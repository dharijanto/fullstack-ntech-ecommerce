"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const crud_service_1=require("./crud-service");class OrderService extends crud_service_1.CRUDService{getOrders(e){return this.getSequelize().query(`SELECT * FROM ordersView WHERE shopId = ${e}`,{type:this.getSequelize().QueryTypes.SELECT}).then(e=>e?{status:!0,data:e}:{status:!1})}getOrder(e){return super.rawReadOneQuery(`SELECT * FROM ordersView WHERE id = ${e}`).then(e=>e.status&&e.data?{status:!0,data:e.data}:{status:!1})}getOrderDetails(e){return this.getSequelize().query(`SELECT * FROM orderDetailsView WHERE orderId = ${e}`,{type:this.getSequelize().QueryTypes.SELECT}).then(e=>e?{status:!0,data:e}:{status:!1})}}exports.default=new OrderService;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2aWNlcy9vcmRlci1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbImNydWRfc2VydmljZV8xIiwicmVxdWlyZSIsIk9yZGVyU2VydmljZSIsIkNSVURTZXJ2aWNlIiwiW29iamVjdCBPYmplY3RdIiwic2hvcElkIiwidGhpcyIsImdldFNlcXVlbGl6ZSIsInF1ZXJ5IiwidHlwZSIsIlF1ZXJ5VHlwZXMiLCJTRUxFQ1QiLCJ0aGVuIiwicmVzdWx0Iiwic3RhdHVzIiwiZGF0YSIsIm9yZGVySWQiLCJzdXBlciIsInJhd1JlYWRPbmVRdWVyeSIsInJlc3AiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJtYXBwaW5ncyI6Im9FQUFBLE1BQUFBLGVBQUFDLFFBQUEsd0JBVUFDLHFCQUEyQkYsZUFBQUcsWUFDekJDLFVBQVdDLEdBQ1QsT0FBT0MsS0FBS0MsZUFBZUMsaURBQWlESCxLQUN4RUksS0FBTUgsS0FBS0MsZUFBZUcsV0FBV0MsU0FBVUMsS0FBS0MsR0FDaERBLEdBQ09DLFFBQVEsRUFBTUMsS0FBTUYsSUFFcEJDLFFBQVEsSUFLekJWLFNBQVVZLEdBQ1IsT0FBT0MsTUFBTUMsdURBQXVERixLQUFXSixLQUFLTyxHQUM5RUEsRUFBS0wsUUFBVUssRUFBS0osTUFDYkQsUUFBUSxFQUFNQyxLQUFNSSxFQUFLSixPQUV6QkQsUUFBUSxJQUt2QlYsZ0JBQWlCWSxHQUNmLE9BQU9WLEtBQUtDLGVBQWVDLHdEQUF3RFEsS0FDL0VQLEtBQU1ILEtBQUtDLGVBQWVHLFdBQVdDLFNBQVVDLEtBQUtDLEdBQ2hEQSxHQUNPQyxRQUFRLEVBQU1DLEtBQU1GLElBRXBCQyxRQUFRLEtBTTNCTSxRQUFBQyxRQUFlLElBQUluQiIsImZpbGUiOiJzZXJ2aWNlcy9vcmRlci1zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ1JVRFNlcnZpY2UgfSBmcm9tICcuL2NydWQtc2VydmljZSdcbmltcG9ydCB7IE1vZGVsLCBJbnN0YW5jZSwgU2VxdWVsaXplIH0gZnJvbSAnc2VxdWVsaXplJ1xuaW1wb3J0ICogYXMgUHJvbWlzZSBmcm9tICdibHVlYmlyZCdcblxuaW1wb3J0IEFwcENvbmZpZyBmcm9tICcuLi9hcHAtY29uZmlnJ1xuXG4vKlxuICBUaGlzIGlzIHVzZWQgdG8gZG8gc2hvcCBtYW5hZ2VtZW50LlxuICBGb3IgZXhhbXBsZSwgdG8gY3VzdG9taXplIHByaWNlIGZvciBwcm9kdWN0XG4qL1xuY2xhc3MgT3JkZXJTZXJ2aWNlIGV4dGVuZHMgQ1JVRFNlcnZpY2Uge1xuICBnZXRPcmRlcnMgKHNob3BJZCkge1xuICAgIHJldHVybiB0aGlzLmdldFNlcXVlbGl6ZSgpLnF1ZXJ5KGBTRUxFQ1QgKiBGUk9NIG9yZGVyc1ZpZXcgV0hFUkUgc2hvcElkID0gJHtzaG9wSWR9YCxcbiAgICAgIHsgdHlwZTogdGhpcy5nZXRTZXF1ZWxpemUoKS5RdWVyeVR5cGVzLlNFTEVDVCB9KS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHRydWUsIGRhdGE6IHJlc3VsdCB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBmYWxzZSB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBnZXRPcmRlciAob3JkZXJJZCk6IFByb21pc2U8TkNSZXNwb25zZTxPcmRlcj4+IHtcbiAgICByZXR1cm4gc3VwZXIucmF3UmVhZE9uZVF1ZXJ5KGBTRUxFQ1QgKiBGUk9NIG9yZGVyc1ZpZXcgV0hFUkUgaWQgPSAke29yZGVySWR9YCkudGhlbihyZXNwID0+IHtcbiAgICAgIGlmIChyZXNwLnN0YXR1cyAmJiByZXNwLmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiB0cnVlLCBkYXRhOiByZXNwLmRhdGEgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBmYWxzZSB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGdldE9yZGVyRGV0YWlscyAob3JkZXJJZCk6IFByb21pc2U8TkNSZXNwb25zZTxPcmRlckRldGFpbFtdPj4ge1xuICAgIHJldHVybiB0aGlzLmdldFNlcXVlbGl6ZSgpLnF1ZXJ5KGBTRUxFQ1QgKiBGUk9NIG9yZGVyRGV0YWlsc1ZpZXcgV0hFUkUgb3JkZXJJZCA9ICR7b3JkZXJJZH1gLFxuICAgICAgeyB0eXBlOiB0aGlzLmdldFNlcXVlbGl6ZSgpLlF1ZXJ5VHlwZXMuU0VMRUNUIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiB7IHN0YXR1czogdHJ1ZSwgZGF0YTogcmVzdWx0IH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgT3JkZXJTZXJ2aWNlKClcbiJdfQ==
